	COL	 	EQU	R0
	ROW	 	EQU	R1
	L_PLAYER  	EQU	R2
	R_PLAYER  	EQU	R3 ;	定義變數
	VECTOR_LR 	EQU	R4
	VECTOR_UD 	EQU	R5
	POINT	EQU	R7	
	ORG 0000H
	JMP START
	ORG 0050H
 START: ;設定初始值及LCM環境設置
	MOV	SP,#1FH
	LCALL 	DELAY	//wait for LCD power-on
	MOV	A,#00111011B	//採用8位元資料存取  雙列字/5*7點矩陣列
	ACALL	COMMAND	

	MOV	A,#00001100B	
	ACALL	COMMAND

	MOV	A,#1
	ACALL	COMMAND

	MOv	COL,#20	;範圍為0~40		
	MOV	ROW,#3		;範圍為0~15
	MOV	L_PLAYER,#1	;範圍為0~15
	MOV	R_PLAYER,#3	;範圍為0~15
	MOV	VECTOR_LR,#0 	;0為左 1為右
	MOV	VECTOR_UD,#0 	;0為上 1為下
	MOV	POINT,#0	;0不動 1為向左  2為向右
	JMP	SHOW_CG
SHOW_CG: 				//CG 00H給最左 01H中間 02H 最右 	 	
	;先判斷球是否在最左或是最右
	//LCALL DELAY	
	MOV	A,COL
	MOV	B,#5
	DIV	AB
	JZ 	BALL_IN_LEFT  		//如果A是零 表示球在最左
	MOV	A,COL
	MOV	B,#5
	DIV	AB
	CJNE	A,#7,BALL_IN_NORMAL 	//如果A不是15 表示球在為一般情況
	LJMP	BALL_IN_RIGHT		//皆不是代表球在最右邊

BALL_IN_RIGHT:
	MOV	A,R_PLAYER
	MOV	B,#8
	DIV	AB 	//不用把B給A 因為在判斷是在哪一區
	MOV	R6,A   //R4之後給鍵盤用

	MOV	A,ROW
	MOV	B,#8
	DIV	AB


	CLR	C
	SUBB	A,R6
	CJNE	A,#0,BALL_IN_NORMAL   //若不等於0代表  雖在最左邊但在不同區
	LJMP	SHOW_CG_RIGHT	
BALL_IN_LEFT:
	MOV	A,L_PLAYER
	MOV	B,#8
	DIV	AB	//不用把B給A 因為在判斷是在哪一區
	
	MOV	R6,A   //R4之後給鍵盤用
	
	MOV	A,ROW
	MOV	B,#8
	DIV	AB	//不用把B給A 因為在判斷是在哪一區
	
	CLR	C
	SUBB	A,R6
	CJNE	A,#0,BALL_IN_NORMAL  //若不等於0代表  雖在最左邊但在不同區
	LJMP	SHOW_CG_LEFT
BALL_IN_NORMAL:			//以下處理一般情況
	LCALL	R_NORMAL
	LCALL	L_NORMAL
	LJMP	SET_NORMAL
SHOW_CG_RIGHT:	//以下處理接球和球處在同在右邊區塊		
	
	LCALL	SET_R_PLATER
	LCALL	L_NORMAL
	MOV	A,COL	
	MOV	B,#5
	DIV AB
	MOV	A,B
	CJNE	A,#0,R_ORL_BALL1
	LJMP	R_ORL_BALL0
	
SHOW_CG_LEFT:	//以下處理接球和球處在同在左邊區塊
	
 	LCALL	SET_L_PLAYER
	LCALL	R_NORMAL	
	MOV	A,COL	
	MOV	B,#5
	DIV AB
	MOV	A,B
	CJNE	A,#0,L_ORL_BALL1
	LJMP	L_ORL_BALL0
R_ORL_BALL0:
	MOV 	DPTR,#BALL_PLACE0
	LJMP	R_BALL_PLACE
R_ORL_BALL1:
	CJNE	A,#1,R_ORL_BALL2
	MOV 	DPTR,#BALL_PLACE1
	LJMP	R_BALL_PLACE
R_ORL_BALL2:
	CJNE	A,#2,R_ORL_BALL3
	MOV 	DPTR,#BALL_PLACE2
	LJMP	R_BALL_PLACE
R_ORL_BALL3:
	CJNE	A,#3,R_ORL_BALL4
	MOV 	DPTR,#BALL_PLACE3
	LJMP	R_BALL_PLACE
R_ORL_BALL4:
	MOV 	DPTR,#BALL_PLACE4
	LJMP	R_BALL_PLACE
	
L_ORL_BALL0:
	MOV 	DPTR,#BALL_PLACE0
	LJMP	L_BALL_PLACE
L_ORL_BALL1:
	CJNE	A,#1,L_ORL_BALL2
	MOV 	DPTR,#BALL_PLACE1
	LJMP	L_BALL_PLACE
L_ORL_BALL2:
	CJNE	A,#2,L_ORL_BALL3
	MOV 	DPTR,#BALL_PLACE2
	LJMP	L_BALL_PLACE
L_ORL_BALL3:
	CJNE	A,#3,L_ORL_BALL4
	MOV 	DPTR,#BALL_PLACE3
	LJMP	L_BALL_PLACE
L_ORL_BALL4:

	MOV 	DPTR,#BALL_PLACE4
	LJMP	L_BALL_PLACE
SET_R_PLATER: 		//先把最右邊的接球放到 R0~R1 (bank2)
	MOV	DPTR,#PLATE_PLACE4	
	MOV	A,R_PLAYER  //(A%8)*8
	MOV	B,#8
	DIV	AB
	MOV	A,B
	MOV	B,#8
	MUL	AB  
		
	SETB	RS1
	CLR		RS0
	MOV	R7,A

	MOV	A,R7
	INC	R7
	MOVC	A,@A+DPTR
	MOV	R0,A
	
 	MOV	A,R7
	INC	R7
	MOVC	A,@A+DPTR
	MOV	R1,A
	
	MOV	A,R7
	INC	R7
	MOVC	A,@A+DPTR
	MOV	R2,A
	
	MOV	A,R7
	INC	R7
	MOVC	A,@A+DPTR
	MOV	R3,A

	MOV	A,R7
	INC	R7
	MOVC	A,@A+DPTR
	MOV	R4,A
	
 	MOV	A,R7
	INC	R7
	MOVC	A,@A+DPTR
	MOV	R5,A
	
	MOV	A,R7
	INC	R7
	MOVC	A,@A+DPTR
	MOV	R6,A
	
	MOV	A,R7
	INC	R7
	MOVC	A,@A+DPTR
	MOV	R7,A
	CLR	RS1
	RET	
SET_L_PLAYER:
	MOV	DPTR,#PLATE_PLACE0	
	MOV	A,L_PLAYER  //(A%8)*8
	MOV	B,#8
	DIV	AB
	MOV	A,B
	MOV	B,#8
	MUL	AB  
		
	SETB	RS1
	CLR	RS0
	MOV	R7,A

	MOV	A,R7
	INC	R7
	MOVC	A,@A+DPTR
	MOV	R0,A
	
 	MOV	A,R7
	INC	R7
	MOVC	A,@A+DPTR
	MOV	R1,A
	
	MOV	A,R7
	INC	R7
	MOVC	A,@A+DPTR
	MOV	R2,A
	
	MOV	A,R7
	INC	R7
	MOVC	A,@A+DPTR
	MOV	R3,A

	MOV	A,R7
	INC	R7
	MOVC	A,@A+DPTR
	MOV	R4,A
	
 	MOV	A,R7
	INC	R7
	MOVC	A,@A+DPTR
	MOV	R5,A
	
	MOV	A,R7
	INC	R7
	MOVC	A,@A+DPTR
	MOV	R6,A
	
	MOV	A,R7
	INC	R7
	MOVC	A,@A+DPTR
	MOV	R7,A
	CLR	RS1
	CLR	RS0
	RET	
	
R_BALL_PLACE:  //球和接球皆在最右
	
	MOV	A,#01010000B 	//CG 第二塊給最右
	LCALL	COMMAND		// 將AC 給CG ROM
	MOV	A,ROW  //(A%8)*8
	MOV	B,#8
	DIV	AB
	MOV	A,B
	MOV	B,#8
	MUL	AB
	MOV	B,A

	SETB	RS1  //切換到另一個bank
	CLR		RS0
	MOV	A,B
	MOVC	A,@A+DPTR
	ORL	A,R0
	LCALL	SDATA  
	INC	DPTR
	
	SETB	RS1
	CLR		RS0
	MOV	A,B
	MOVC	A,@A+DPTR
	ORL	A,R1
	LCALL	SDATA  
	INC	DPTR
	
	SETB	RS1
	CLR		RS0
	MOV	A,B
	MOVC	A,@A+DPTR
	ORL	A,R2
	LCALL	SDATA  
	INC	DPTR
	
	SETB	RS1
	CLR		RS0
	MOV	A,B
	MOVC	A,@A+DPTR
	ORL	A,R3
	LCALL	SDATA  
	INC	DPTR
	
	SETB	RS1
	CLR		RS0
	MOV	A,B
	MOVC	A,@A+DPTR
	ORL	A,R4
	LCALL	SDATA  
	INC	DPTR
	
	SETB	RS1
	CLR		RS0
	MOV	A,B
	MOVC	A,@A+DPTR
	ORL	A,R5
	LCALL	SDATA  
	INC	DPTR
	
	SETB	RS1
	CLR		RS0
	MOV	A,B
	MOVC	A,@A+DPTR
	ORL	A,R6
	LCALL	SDATA  
	INC	DPTR
	
	SETB	RS1
	CLR		RS0
	MOV	A,B
	MOVC	A,@A+DPTR
	ORL	A,R7
	LCALL	SDATA  
	INC	DPTR
	CLR	RS1
	LCALL CLEAR
	LCALL	SHOW_DD
L_BALL_PLACE:    //球和接球皆在最左

	MOV	A,#01000000B 	//CG 00H給最左
	LCALL	COMMAND 	// 將AC 給CG ROM
	MOV	A,ROW  //(A%8)*8
	MOV	B,#8
	DIV	AB
	MOV	A,B
	MOV	B,#8
	MUL	AB	
	MOV	B,A

	SETB	RS1  //切換到另一個bank
	CLR		RS0
	MOV	A,B
	MOVC	A,@A+DPTR
	ORL	A,R0
	LCALL	SDATA  	
	INC	DPTR

	SETB	RS1
	CLR		RS0
	MOV	A,B
	MOVC	A,@A+DPTR
	ORL	A,R1
	LCALL	SDATA  
	INC	DPTR
	
	SETB	RS1
	CLR		RS0
	MOV	A,B	
	MOVC	A,@A+DPTR
	ORL	A,R2
	LCALL	SDATA  
	INC	DPTR
	
	SETB	RS1
	CLR		RS0
	MOV	A,B
	MOVC	A,@A+DPTR
	ORL	A,R3
	LCALL	SDATA  
	INC	DPTR
	
	SETB	RS1
	CLR		RS0
	MOV	A,B
	MOVC	A,@A+DPTR
	ORL	A,R4
	LCALL	SDATA  
	INC	DPTR
	
	SETB	RS1
	CLR		RS0
	MOV	A,B
	MOVC	A,@A+DPTR
	ORL	A,R5
	LCALL	SDATA  
	INC	DPTR
	
	SETB	RS1
	CLR		RS0
	MOV	A,B
	MOVC	A,@A+DPTR
	ORL	A,R6
	LCALL	SDATA  
	INC	DPTR
	
	SETB	RS1
	CLR		RS0
	MOV	A,B
	MOVC	A,@A+DPTR
	ORL	A,R7
	LCALL	SDATA  
	INC	DPTR

	CLR	RS1  //切換回去原本的bank
	LCALL CLEAR
	LCALL	SHOW_DD
 R_NORMAL:   //一般情況的右邊接球
	SETB	RS1
	CLR		RS1
	MOV	A,#01010000B
	LCALL	COMMAND	 		//將AC 只到CG RAM的第3塊
	MOV	DPTR,#PLATE_PLACE4
	SETB	RS1
	CLR		RS1	

	MOV	A,R_PLAYER
	MOV	B,#8
	DIV	AB
	MOV	A,#8
	MUL	AB
	MOV	B,A
	

	MOV	A,B
	MOVC	A,@A+DPTR
	LCALL	SDATA
	INC	DPTR
	
	MOV	A,B
	MOVC	A,@A+DPTR
	LCALL	SDATA
	INC	DPTR

	MOV	A,B
	MOVC	A,@A+DPTR
	LCALL	SDATA
	INC	DPTR
	
	MOV	A,B
	MOVC	A,@A+DPTR
	LCALL	SDATA
	INC	DPTR
	
	MOV	A,B
	MOVC	A,@A+DPTR
	LCALL	SDATA
	INC	DPTR
	
	MOV	A,B
	MOVC	A,@A+DPTR
	LCALL	SDATA
	INC	DPTR

	MOV	A,B
	MOVC	A,@A+DPTR
	LCALL	SDATA
	INC	DPTR
	
	MOV	A,B
	MOVC	A,@A+DPTR
	LCALL	SDATA

	RET
 L_NORMAL:	//一般情況的左邊接球
	MOV	A,#01000000B
	LCALL	COMMAND	 		//將AC 只到CG RAM的第3塊
	MOV	DPTR,#PLATE_PLACE0

	MOV	A,L_PLAYER
	MOV	B,#8
	DIV	AB
	MOV	A,#8
	MUL	AB
	MOV	B,A
	
	MOV	A,B
	MOVC	A,@A+DPTR
	LCALL	SDATA
	INC	DPTR
	
	MOV	A,B
	MOVC	A,@A+DPTR
	LCALL	SDATA
	INC	DPTR

	MOV	A,B
	MOVC	A,@A+DPTR
	LCALL	SDATA
	INC	DPTR
	
	MOV	A,B
	MOVC	A,@A+DPTR
	LCALL	SDATA
	INC	DPTR
	
	MOV	A,B
	MOVC	A,@A+DPTR
	LCALL	SDATA
	INC	DPTR
	
	MOV	A,B
	MOVC	A,@A+DPTR
	LCALL	SDATA
	INC	DPTR

	MOV	A,B
	MOVC	A,@A+DPTR
	LCALL	SDATA
	INC	DPTR
	
	MOV	A,B
	MOVC	A,@A+DPTR
	LCALL	SDATA
	RET
 SET_NORMAL:
	MOV	A,COL
	MOV	B,#5
	DIV	AB
	MOV	A,B
	CJNE	A,#0,N_BALL1
	LJMP	N_BALL0
 N_BALL0:
	MOV 	DPTR,#BALL_PLACE0
	LJMP	N_BALL_PLACE
 N_BALL1:
	CJNE	A,#1,N_BALL2
	MOV 	DPTR,#BALL_PLACE1
	LJMP	N_BALL_PLACE
 N_BALL2:
	CJNE	A,#2,N_BALL3
	MOV 	DPTR,#BALL_PLACE2
	LJMP	N_BALL_PLACE
 N_BALL3:
	CJNE	A,#3,N_BALL4
	MOV 	DPTR,#BALL_PLACE3
	LJMP	N_BALL_PLACE
 N_BALL4:
	MOV 	DPTR,#BALL_PLACE4
	LJMP	N_BALL_PLACE
 N_BALL_PLACE:
	MOV	A,#01001000B
	LCALL	COMMAND
	MOV	A,ROW  //(A%8)*8
	MOV	B,#8
	DIV	AB
	MOV	A,B
	MOV	B,#8
	MUL	AB
	MOV	B,A

	MOV		A,B
	MOVC	A,@A+DPTR
	LCALL	SDATA	
	INC	DPTR
	
	MOV		A,B
	MOVC	A,@A+DPTR
	LCALL	SDATA	
	INC	DPTR
	
	MOV		A,B
	MOVC	A,@A+DPTR
	LCALL	SDATA	
	INC	DPTR
	
	MOV		A,B
	MOVC	A,@A+DPTR
	LCALL	SDATA	
	INC	DPTR
	
	MOV		A,B
	MOVC	A,@A+DPTR
	LCALL	SDATA	
	INC	DPTR
	
	MOV		A,B
	MOVC	A,@A+DPTR
	LCALL	SDATA	
	INC	DPTR
	
	MOV		A,B
	MOVC	A,@A+DPTR
	LCALL	SDATA	
	INC	DPTR
	
	MOV		A,B
	MOVC	A,@A+DPTR
	LCALL	SDATA	
	//ACALL	CLEAR //螢幕清除
	
	LJMP	SHOW_N_DD
 CLEAR:
	MOV	A,#1		//全部清除
	LCALL	COMMAND
	RET 	
 SHOW_N_DD:  
	ACALL	CLEAR //螢幕清除
	LCALL	SHOW_NORMAL
	JMP	SHOW_DD
 SHOW_DD:  
 	LCALL	SHOW_NORMAL_R
	LCALL	SHOW_NORMAL_L
	LCALL	DELAYHALF_1S
	LJMP	KEYBOARD1_ROW1
 KEYBOARD1_ROW1:   //FOR 左邊玩家
	MOV P2,#7FH ;掃描第一列 
	ACALL DELAY50US
	MOV A,P2
	ANL A,#0FH 		;將高四位清為 0( 只取列 
	CJNE A,#0FH,COL1_1;確認第一列有無被按下，有跳到 COL1 ，沒有則掃描下一個鍵盤
	JMP KEYBOARD2_ROW1
 COL1_1:   //第一行		0不動 1為向左 2為向右								
	CJNE A,#0EH,COL1_2 ;確認第一行有無被按下，有則顯示，沒有則跳到 COL2
	INC	 L_PLAYER	//+1後 %15
	MOV	A,L_PLAYER
	MOV	B,#15
	DIV	AB
	MOV A,B
	MOV	L_PLAYER,A		
	JMP KEYBOARD2_ROW1
 COL1_2:  ;第二行  		 0不動 1為向左 2為向右
 	
	MOV	A,L_PLAYER	   //+14 再 %15
	ADD A,#14
	MOV	B,#15
	DIV	AB
	MOV A,B
	MOV	L_PLAYER,A	 
	JMP KEYBOARD2_ROW1
 		
 KEYBOARD2_ROW1:	//FOR 右邊玩家	0不動 1為向左 2為向右	
	MOV P3,#7FH ;掃描第一列 
	ACALL DELAY50US
	MOV A,P3
	ANL A,#0FH 		;將高四位清為 0( 只取列
	CJNE A,#0FH,COL2_1;確認第一列有無被按下，有跳到 COL1 ，沒有則跳至下一步 +1+1
	JMP NEXT_STEP_UD
 COL2_1: 				//0不動 1為向左 2為向右								
	CJNE A,#0EH,COL2_2 ;確認第一行有無被按下，有則顯示，沒有則跳到 COL2
	INC	 R_PLAYER		//+1後 %15	   	;第一行 
	MOV	A,R_PLAYER
	MOV	B,#15
	DIV	AB
	MOV A,B
	MOV	R_PLAYER,A	
	JMP NEXT_STEP_UD
 COL2_2:					   ;第二行 +2
	MOV	A,R_PLAYER	   //+14 再 %15
	ADD A,#14
	MOV	B,#15
	DIV	AB
	MOV A,B
	MOV	R_PLAYER,A	 
	LJMP NEXT_STEP_UD
 NEXT_STEP_UD: 		;0為上 1為下					
	CJNE	VECTOR_UD,#0,DOWN
	JMP	UP
 UP:
	DEC	ROW
	CJNE	ROW,#0,NEXT_STEP_LR
	JMP	CHANGE_TO_DOWN 		
 DOWN:
	INC	ROW
	CJNE	ROW,#15,NEXT_STEP_LR
	JMP	CHANGE_TO_UP
 CHANGE_TO_DOWN:
	MOV	VECTOR_UD,#1
	JMP	NEXT_STEP_LR
 CHANGE_TO_UP:
	MOV	VECTOR_UD,#0
	JMP	NEXT_STEP_LR

 NEXT_STEP_LR:	;0為左 1為右
	CJNE	VECTOR_LR,#0,RIGHT
	JMP	LEFT
 RIGHT:
	INC	COL
	CJNE	COL,#39,FORLJMP
	LJMP	R_JUDGE1
 LEFT:
	DEC	COL
	CJNE	COL,#0,FORLJMP
	LJMP	L_JUDGE1
 FORLJMP:
	LJMP	SHOW_CG 
 R_JUDGE1:	   //判斷右邊玩家是否接到球
	MOV	VECTOR_LR,#0             //先換方向
	MOV		A,ROW
	CLR		C
	SUBB	A,R_PLAYER
	CJNE	A,#0,R_JUDGE2		//不等於0 代表沒在此處接到球 進入第二次判斷
	LJMP	SHOW_CG
 R_JUDGE2:
	MOV	A,ROW
	CLR	C
	SUBB	A,R_PLAYER
	CLR	C
	SUBB	A,#1
	CJNE	A,#0,R_JUDGE3		//不等於0 代表沒在此處接到球 進入第三次判斷
	LJMP	SHOW_CG
 R_JUDGE3:
	MOV	A,ROW
	INC	A
	CLR	C
	SUBB	A,R_PLAYER
	CJNE	A,#0,L_PLUS		//不等於0 代表沒在此處接到球 進入L+分的副程式
	LJMP	SHOW_CG
 L_JUDGE1:	  //判斷左邊玩家是否接到球
	MOV	VECTOR_LR,#1
	MOV		A,ROW
	CLR		C
	SUBB	A,L_PLAYER
	CJNE	A,#0,L_JUDGE2	  //不等於0 代表沒接到球  R加分
	LJMP	SHOW_CG
 L_JUDGE2:
	MOV	A,ROW
	CLR	C
	SUBB	A,L_PLAYER
	CLR	C
	SUBB	A,#1
	CJNE	A,#0,L_JUDGE3		//不等於0 代表沒在此處接到球 進入第三次判斷
	LJMP	SHOW_CG
 L_JUDGE3:
	MOV	A,ROW
	INC		A
	CLR	C
	SUBB	A,L_PLAYER
	CJNE	A,#0,R_PLUS		//不等於0 代表沒在此處接到球 進入R+分的副程式
	LJMP	SHOW_CG
 L_PLUS:    //PONINT 的高四位 用來代表L的分數
 	MOV	A,POINT
	ADD	A,#00010000B
	MOV	POINT,A
	JMP	SHOW_POINT
 R_PLUS:   //PONINT 的低四位 用來代表L的分數
 	MOV	A,POINT
	ADD	A,#00000001B
	MOV	POINT,A
	JMP	SHOW_POINT		 
 SHOW_POINT:			 //SHOW出分數
 	MOV	A,#1
	LCALL	COMMAND

	MOV	A,#10000000B
	LCALL	COMMAND      //第一行給左邊玩家 
	MOV	DPTR,#L_PLAYER_TABLE  //先秀出左邊玩家的DATA
 SHOW_L_DATA:
 	CLR	 A
 	MOVC A,@A+DPTR
	INC	DPTR
	JZ SHOW_L_POINT
	LCALL SDATA
	JMP	SHOW_L_DATA
 SHOW_L_POINT:
 	MOV	A,POINT
	MOV	B,#00010000B
	DIV	AB
	MOV	DPTR,#POINT_TABLE
	MOVC A,@A+DPTR
	LCALL	SDATA
 SHOW_POINT2:
	MOV	DPTR,#R_PLAYER_TABLE
	MOV	A,#11000000B
	LCALL	COMMAND    //第二行給右邊玩家
 SHOW_R_DATA:
 	CLR	 A
 	MOVC A,@A+DPTR
	INC	DPTR
	JZ SHOW_R_POINT
	LCALL SDATA
	JMP	SHOW_R_DATA
 SHOW_R_POINT:
 	MOV	A,POINT
	MOV	B,#00010000B
	DIV	AB
	MOV	A,B
	MOV	DPTR,#POINT_TABLE
	MOVC A,@A+DPTR
	LCALL	SDATA
	JMP	IF_L_WIN
 IF_L_WIN:
 	LCALL DELAY3S
	MOV	A,POINT
	MOV	B,#00010000B
	DIV	AB
	CJNE	A,#1,IF_R_WIN  //五分則L方獲勝
	LCALL	CLEAR    //清除螢幕然後秀出L WIN
	MOV	DPTR,#L_WIN
	JMP	SHOW_L_WIN
 IF_R_WIN:
 	MOV	A,POINT
	MOV	B,#00010000B
	DIV	AB
	MOV	A,B
	CJNE	A,#1,FORLJMP2	  //五分則R方獲勝
	LCALL	CLEAR    //清除螢幕然後秀出L WIN
	MOV	DPTR,#R_WIN
	JMP	SHOW_R_WIN
 
 SHOW_L_WIN:
 	 CLR	A
	 MOVC	A,@A+DPTR
	 INC	DPTR
	 LCALL	SDATA
	 JZ	SHOW_RESTART_SET
	 JMP	SHOW_L_WIN
 SHOW_R_WIN:
 	 CLR	A
	 MOVC	A,@A+DPTR
	 INC	DPTR
	 LCALL	SDATA
	 JZ	SHOW_RESTART_SET
	 JMP	SHOW_R_WIN 
 SHOW_RESTART_SET:
	LCALL	DELAY3S
	MOV	A,#1
	LCALL	COMMAND
	MOV	DPTR,#RESTART_TABLE
 SHOW_RESTART:
	CLR	A
	MOVC	A,@A+DPTR
	INC	DPTR
	LCALL	SDATA
	JZ	RESTART
	JMP	SHOW_RESTART
 RESTART:
 	MOV	POINT,#0
	ACALL	DELAY3S	 
 FORLJMP2:
 	LJMP	SHOW_CG				
 SHOW_NORMAL:
	MOV	A,COL
	MOV	B,#5
	DIV	AB
	MOV	R6,A
	
	MOV	A,ROW
	MOV	B,#8
	DIV	AB

	MOV	B,#64
	MUL	AB
	
	ADD	A,R6
	
	ADD	A,#10000000B
	LCALL	COMMAND
	
	MOV	A,#01H
	LCALL	SDATA
	RET
 SHOW_NORMAL_R:
	
	MOV	A,R_PLAYER
	MOV	B,#8
	DIV	AB

	MOV	B,#64
	MUL	AB
	ADD	A,#10000111B
	LCALL 	COMMAND
	
	MOV	A,#02H
	LCALL	SDATA
	RET
 SHOW_NORMAL_L:
	
	MOV	A,L_PLAYER
	MOV	B,#8
	DIV	AB

	MOV	B,#64
	MUL	AB
	ADD	A,#10000000B
	LCALL 	COMMAND
	
	MOV	A,#00H
	LCALL	SDATA
	RET
 COMMAND:  
	MOV	P0, A
	MOV	P1,#00000100B  ;Data Bus --> Instruction Register
	ACALL	DELAY50US
	MOV	P1,#00000000B
	ACALL	DELAY50US
	RET
 SDATA:
	MOV	P0, A
	MOV	P1,#00000101B  ;Data Bus --> Data Register --> DD RAM
	ACALL	DELAY50US
	MOV	P1,#00000001B
	ACALL	DELAY50US
	RET	

DELAY:
	SETB	RS1
	SETB	RS0
	MOV 	R5,#80
DELAY1:
	MOV 	R6,#17
DELAY2:
	MOV 	R7,#219
DELAY3:
	DJNZ 	R7,DELAY3 
	DJNZ 	R6,DELAY2 
	DJNZ 	R5,DELAY1 
	CLR		RS1
	CLR		RS0
	RET
DELAYHALF_1S:
	SETB	RS1
	SETB	RS0
	MOV 	R5,#101
DELAY1_HALF_1S:
	MOV 	R6,#220
DELAY2_HALF_1S:
	MOV 	R7,#66
DELAY3_HALF_1S:
	DJNZ 	R7,DELAY3_HALF_1S 
	DJNZ 	R6,DELAY2_HALF_1S 
	DJNZ 	R5,DELAY1_HALF_1S 
	CLR		RS1
	CLR		RS0
	RET  	
DELAY3S:
	SETB	RS1
	SETB	RS0
	MOV 	R5,#250
DELAY1_3S:
	MOV 	R6,#233
DELAY2_3S:
	MOV 	R7,#153 
DELAY3_3S:
	DJNZ 	R7,DELAY3_3S 
	DJNZ 	R6,DELAY2_3S 
	DJNZ 	R5,DELAY1_3S 
	CLR		RS1
	CLR		RS0
	RET	
DELAY50US:
	SETB	RS1
	SETB	RS0
	MOV 	R5,#7
DELAY1_50US:
	MOV 	R6,#9
DELAY2_50US:
	MOV 	R7,#35 
DELAY3_50US:
	DJNZ 	R7,DELAY3_50US 
	DJNZ 	R6,DELAY2_50US 
	DJNZ 	R5,DELAY1_50US 
	CLR		RS1
	CLR		RS0
	RET
RESTART_TABLE:
    DB "RESTART!!!!!!!!!",0
L_WIN:
    DB "L WIN THE GAME!!",0
R_WIN:
 	DB "R WIN THE GAME!!",0
L_PLAYER_TABLE:
	DB "L_PLAYER:",0
R_PLAYER_TABLE:
	DB "R_PLAYER:",0
POINT_TABLE:
	DB "0123456789"
PLATE_PLACE0:  //COL->0  等價於最左邊的接球
	DB 00010000B
	DB 00010000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	
	DB 00010000B
	DB 00010000B
	DB 00010000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B

	DB 00000000B
	DB 00010000B
	DB 00010000B
	DB 00010000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B

	DB 00000000B
	DB 00000000B
	DB 00010000B
	DB 00010000B
	DB 00010000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00010000B
	DB 00010000B
	DB 00010000B
	DB 00000000B
	DB 00000000B

	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00010000B
	DB 00010000B
	DB 00010000B
	DB 00000000B
		
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00010000B
	DB 00010000B
	DB 00010000B
	
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00010000B
	DB 00010000B
PLATE_PLACE4:  //COL->4  等價於 最右邊的接球
	DB 00000001B
	DB 00000001B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	
	DB 00000001B
	DB 00000001B
	DB 00000001B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B

	DB 00000000B
	DB 00000001B
	DB 00000001B
	DB 00000001B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B

	DB 00000000B
	DB 00000000B
	DB 00000001B
	DB 00000001B
	DB 00000001B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000001B
	DB 00000001B
	DB 00000001B
	DB 00000000B
	DB 00000000B

	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000001B
	DB 00000001B
	DB 00000001B
	DB 00000000B
		
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000001B
	DB 00000001B
	DB 00000001B
	
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000001B
	DB 00000001B
 	
BALL_PLACE0:  //COL->0  等價於最左邊的接球
	DB 00010000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	
	DB 00000000B
	DB 00010000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B

	DB 00000000B
	DB 00000000B
	DB 00010000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B

	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00010000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00010000B
	DB 00000000B
	DB 00000000B
	DB 00000000B

	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00010000B
	DB 00000000B
	DB 00000000B
		
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00010000B
	DB 00000000B
	
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00010000B

BALL_PLACE1:  //COL->1
	DB 00001000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	
	DB 00000000B
	DB 00001000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B

	DB 00000000B
	DB 00000000B
	DB 00001000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B

	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00001000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00001000B
	DB 00000000B
	DB 00000000B
	DB 00000000B

	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00001000B
	DB 00000000B
	DB 00000000B
		
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00001000B
	DB 00000000B
	
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00001000B

BALL_PLACE2:  //COL-2
	DB 00000100B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	
	DB 00000000B
	DB 00000100B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B

	DB 00000000B
	DB 00000000B
	DB 00000100B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B

	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000100B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000100B
	DB 00000000B
	DB 00000000B
	DB 00000000B

	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000100B
	DB 00000000B
	DB 00000000B
		
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000100B
	DB 00000000B
	
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000100B
BALL_PLACE3:  //COL->3
	DB 00000010B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	
	DB 00000000B
	DB 00000010B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B

	DB 00000000B
	DB 00000000B
	DB 00000010B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B

	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000010B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000010B
	DB 00000000B
	DB 00000000B
	DB 00000000B

	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000010B
	DB 00000000B
	DB 00000000B
		
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000010B
	DB 00000000B
	
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000010B
BALL_PLACE4:  //COL->4  等價於 最右邊的接球
	DB 00000001B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	
	DB 00000000B
	DB 00000001B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B

	DB 00000000B
	DB 00000000B
	DB 00000001B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B

	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000001B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000001B
	DB 00000000B
	DB 00000000B
	DB 00000000B

	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000001B
	DB 00000000B
	DB 00000000B
		
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000001B
	DB 00000000B
	
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000000B
	DB 00000001B
 	END